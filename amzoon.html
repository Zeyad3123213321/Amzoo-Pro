<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>AMZOO Pro Clone</title>
  <style>
    /* ===== CSS Variables ===== */
    :root {
      --primary-color: #131921;
      --secondary-color: #232f3e;
      --accent-color: #febd69;
      --text-light: #ffffff;
      --text-dark: #111111;
      --bg-light: #ffffff;
      --bg-dark: #181818;
      --transition-speed: 0.3s;
    }

    /* ===== Base Styles ===== */
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: 'Amazon Ember', Arial, sans-serif;
      line-height: 1.6;
      background-color: var(--bg-light);
      color: var(--text-dark);
      transition: all var(--transition-speed) ease;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    body.dark-mode {
      background-color: var(--bg-dark);
      color: var(--text-light);
    }

    /* ===== Header Styles ===== */
    header {
      background-color: var(--primary-color);
      color: var(--text-light);
      padding: 0.5rem 2rem;
      position: sticky;
      top: 0;
      z-index: 1000;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      display: flex;
      align-items: center;
      flex-wrap: wrap;
      gap: 1.5rem;
    }

    .logo {
      font-size: 2rem;
      font-weight: bold;
      cursor: pointer;
      transition: transform 0.2s ease;
      flex-shrink: 0;
    }

    .logo:hover {
      transform: scale(1.05);
    }

    /* ===== Enhanced Search Bar ===== */
    .search-bar {
      flex: 1;
      max-width: 800px;
      display: flex;
      border-radius: 5px;
      overflow: hidden;
      transition: all var(--transition-speed) ease;
      background: white;
    }

    .search-bar:focus-within {
      box-shadow: 0 0 8px rgba(254, 189, 105, 0.5);
    }

    .search-input {
      width: 100%;
      padding: 0.8rem;
      border: none;
      font-size: 1rem;
      outline: none;
    }

    .search-button {
      background-color: var(--accent-color);
      padding: 0 1.5rem;
      border: none;
      cursor: pointer;
      display: flex;
      align-items: center;
      transition: background-color var(--transition-speed) ease;
      font-size: 1.25rem;
    }

    .search-button:hover {
      background-color: #f3a847;
    }

    /* ===== User Controls ===== */
    .user-controls {
      display: flex;
      gap: 1rem;
      margin-left: auto;
    }

    .control-btn {
      background: none;
      border: none;
      color: var(--text-light);
      padding: 0.5rem 1rem;
      cursor: pointer;
      border-radius: 4px;
      transition: all var(--transition-speed) ease;
      display: flex;
      align-items: center;
      gap: 0.5rem;
      font-size: 1rem;
    }

    .control-btn:hover {
      background-color: rgba(255,255,255,0.1);
    }

    .cart-btn {
      position: relative;
      font-size: 1.3rem;
    }

    /* ===== Cart Counter ===== */
    .cart-counter {
      position: absolute;
      top: -8px;
      right: -8px;
      background: #b12704;
      color: white;
      width: 20px;
      height: 20px;
      border-radius: 50%;
      font-size: 0.75rem;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      pointer-events: none;
    }

    /* ===== Product Grid ===== */
    main {
      flex: 1;
      padding: 2rem;
      max-width: 1200px;
      margin: 0 auto;
      width: 100%;
    }

    .products-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 2rem;
    }

    .product-card {
      background: var(--bg-light);
      border-radius: 10px;
      overflow: hidden;
      box-shadow: 0 3px 6px rgba(0,0,0,0.1);
      transition: transform var(--transition-speed) ease;
      position: relative;
      display: flex;
      flex-direction: column;
    }

    .product-card:hover {
      transform: translateY(-5px);
    }

    .product-image {
      width: 100%;
      height: 200px;
      object-fit: contain;
      background: white;
      padding: 1rem;
    }

    .product-info {
      padding: 1rem;
      flex: 1;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
    }

    .product-title {
      font-weight: 600;
      margin-bottom: 0.5rem;
      font-size: 1rem;
      min-height: 2.4em; /* 2 lines */
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .product-price {
      color: #b12704;
      font-size: 1.25rem;
      font-weight: bold;
      margin: 0.5rem 0;
    }

    .product-rating {
      display: flex;
      align-items: center;
      gap: 0.25rem;
      color: #ffa41c;
      font-size: 1rem;
    }

    .add-to-cart-btn {
      background-color: var(--accent-color);
      border: none;
      padding: 0.6rem;
      font-weight: bold;
      cursor: pointer;
      border-radius: 5px;
      transition: background-color var(--transition-speed) ease;
      margin-top: 0.75rem;
    }

    .add-to-cart-btn:hover {
      background-color: #f3a847;
    }

    /* ===== Dark Mode ===== */
    body.dark-mode .product-card {
      background: #232f3e;
      color: var(--text-light);
    }

    /* ===== Footer ===== */
    footer.main-footer {
      background: var(--primary-color);
      color: var(--text-light);
      padding: 3rem 2rem;
      margin-top: 4rem;
    }

    .footer-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 2rem;
      max-width: 1200px;
      margin: 0 auto;
    }

    .footer-section h4 {
      color: var(--accent-color);
      margin-bottom: 1rem;
    }

    .footer-links {
      list-style: none;
    }

    .footer-links li {
      margin-bottom: 0.5rem;
    }

    .footer-links a {
      color: inherit;
      text-decoration: none;
      transition: color var(--transition-speed) ease;
    }

    .footer-links a:hover {
      color: var(--accent-color);
    }

    /* ===== Modal ===== */
    .auth-modal, .cart-modal {
      display: none;
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background: rgba(0,0,0,0.5);
      justify-content: center;
      align-items: center;
      z-index: 10000;
    }

    .auth-modal.active, .cart-modal.active {
      display: flex;
    }

    .auth-content, .cart-content {
      background: var(--bg-light);
      color: var(--text-dark);
      padding: 2rem;
      border-radius: 10px;
      width: 90%;
      max-width: 400px;
      position: relative;
      box-shadow: 0 3px 15px rgba(0,0,0,0.3);
      max-height: 90vh;
      overflow-y: auto;
    }

    body.dark-mode .auth-content,
    body.dark-mode .cart-content {
      background: #232f3e;
      color: var(--text-light);
    }

    .close-modal {
      position: absolute;
      top: 1rem;
      right: 1rem;
      background: none;
      border: none;
      font-size: 1.5rem;
      cursor: pointer;
      color: inherit;
    }

    .auth-content h2,
    .cart-content h2 {
      margin-bottom: 1rem;
      text-align: center;
    }

    .auth-content form {
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }

    .auth-content label {
      font-weight: 600;
    }

    .auth-content input {
      padding: 0.5rem;
      font-size: 1rem;
      border-radius: 5px;
      border: 1px solid #ccc;
      outline-offset: 2px;
      transition: border-color 0.3s ease;
    }

    .auth-content input:focus {
      border-color: var(--accent-color);
    }

    .auth-content button {
      padding: 0.75rem;
      background-color: var(--accent-color);
      border: none;
      font-weight: bold;
      cursor: pointer;
      border-radius: 5px;
      transition: background-color var(--transition-speed) ease;
    }

    .auth-content button:hover {
      background-color: #f3a847;
    }

    .toggle-auth-mode {
      text-align: center;
      margin-top: 1rem;
      cursor: pointer;
      color: var(--primary-color);
      font-weight: 600;
      user-select: none;
    }

    body.dark-mode .toggle-auth-mode {
      color: var(--accent-color);
    }

    /* ===== Cart Modal Styling ===== */
    .cart-list {
      list-style: none;
      max-height: 300px;
      overflow-y: auto;
      margin-bottom: 1rem;
    }

    .cart-list li {
      display: flex;
      justify-content: space-between;
      padding: 0.5rem 0;
      border-bottom: 1px solid #ddd;
    }

    body.dark-mode .cart-list li {
      border-color: #444;
    }

    .cart-total {
      font-weight: bold;
      font-size: 1.2rem;
      text-align: right;
      margin-bottom: 1rem;
    }

    .empty-cart-msg {
      text-align: center;
      font-style: italic;
      color: #777;
    }

    /* ===== Accessibility Focus Styles ===== */
    a, button, input {
      outline-offset: 2px;
    }

    a:focus, button:focus, input:focus {
      outline: 3px solid var(--accent-color);
    }

    

    /* ===== Responsive ===== */
    @media (max-width: 600px) {
      header {
        flex-direction: column;
        align-items: stretch;
      }

      .search-bar {
        max-width: 100%;
        margin-top: 0.5rem;
      }

      .user-controls {
        justify-content: flex-end;
        margin-left: 0;
      }

      main {
        padding: 1rem;
      }
    }
  </style>
</head>
<body>
  <header>
    <div class="logo" tabindex="0" aria-label="Amazon Pro homepage">Amzoo Pro</div>

    <form class="search-bar" role="search" aria-label="Search products">
      <input
        type="search"
        class="search-input"
        placeholder="Search products..."
        aria-label="Search products"
        id="searchInput"
      />
      <button type="submit" class="search-button" aria-label="Search">
        🔍
      </button>
    </form>

    <div class="user-controls">
      <button class="control-btn" id="darkModeToggle" aria-pressed="false" aria-label="Toggle dark mode">
        🌙 Dark Mode
      </button>

      <button class="control-btn" id="loginBtn" aria-haspopup="dialog" aria-controls="authModal" aria-expanded="false">
        🔐 Login
      </button>

      <button class="control-btn cart-btn" id="cartBtn" aria-haspopup="dialog" aria-controls="cartModal" aria-expanded="false" aria-label="View cart">
        🛒 Cart
        <span class="cart-counter" aria-live="polite" aria-atomic="true" id="cartCount">0</span>
      </button>
    </div>
  </header>

  <main>
    <section aria-label="Product listings">
      <ul class="products-grid" id="productsGrid" tabindex="0"></ul>
    </section>
  </main>

  <!-- Footer -->
  <footer class="main-footer" role="contentinfo">
    <div class="footer-grid">
      <section class="footer-section">
        <h4>Get to Know Us</h4>
        <ul class="footer-links">
          <li><a href="#" tabindex="0">Careers</a></li>
          <li><a href="#" tabindex="0">Blog</a></li>
          <li><a href="#" tabindex="0">About Amazon</a></li>
          <li><a href="#" tabindex="0">Sustainability</a></li>
        </ul>
      </section>

      <section class="footer-section">
        <h4>Make Money with Us</h4>
        <ul class="footer-links">
          <li><a href="#" tabindex="0">Sell products</a></li>
          <li><a href="#" tabindex="0">Affiliate program</a></li>
          <li><a href="#" tabindex="0">Advertise Your Products</a></li>
          <li><a href="#" tabindex="0">Self-Publish</a></li>
        </ul>
      </section>

      <section class="footer-section">
        <h4>Amazon Payment Products</h4>
        <ul class="footer-links">
          <li><a href="#" tabindex="0">Amazon Rewards Visa Signature Cards</a></li>
          <li><a href="#" tabindex="0">Amazon.com Store Card</a></li>
          <li><a href="#" tabindex="0">Amazon Business Card</a></li>
          <li><a href="#" tabindex="0">Amazon Currency Converter</a></li>
        </ul>
      </section>

      <section class="footer-section">
        <h4>Let Us Help You</h4>
        <ul class="footer-links">
          <li><a href="#" tabindex="0">Amazon and COVID-19</a></li>
          <li><a href="#" tabindex="0">Your Account</a></li>
          <li><a href="#" tabindex="0">Shipping Rates & Policies</a></li>
          <li><a href="#" tabindex="0">Returns & Replacements</a></li>
        </ul>
      </section>
    </div>
  </footer>

  <!-- Authentication Modal -->
  <div class="auth-modal" id="authModal" role="dialog" aria-modal="true" aria-labelledby="authTitle" aria-hidden="true">
    <div class="auth-content">
      <button class="close-modal" id="closeAuthModal" aria-label="Close login form">&times;</button>
      <h2 id="authTitle">Login</h2>
      <form id="authForm" novalidate>
        <label for="emailInput">Email:</label>
        <input type="email" id="emailInput" required aria-required="true" placeholder="Enter your email" />

        <label for="passwordInput">Password:</label>
        <input type="password" id="passwordInput" required aria-required="true" placeholder="Enter your password" minlength="6" />

        <button type="submit" id="authSubmitBtn">Login</button>
      </form>
      <div class="toggle-auth-mode" id="toggleAuthMode" tabindex="0" role="button" aria-pressed="false">
        Don't have an account? Sign Up
      </div>
    </div>
  </div>

  <!-- Cart Modal -->
  <div class="cart-modal" id="cartModal" role="dialog" aria-modal="true" aria-labelledby="cartTitle" aria-hidden="true">
    <div class="cart-content">
      <button class="close-modal" id="closeCartModal" aria-label="Close cart">&times;</button>
      <h2 id="cartTitle">Your Cart</h2>
      <ul class="cart-list" id="cartList" tabindex="0"></ul>
      <div class="cart-total" id="cartTotal"></div>
      <button id="checkoutBtn" class="add-to-cart-btn" disabled>Checkout</button>
    </div>
  </div>

  <script>
    // ===== Variables =====
    const darkModeToggle = document.getElementById('darkModeToggle');
    const body = document.body;

    const productsGrid = document.getElementById('productsGrid');
    const searchInput = document.getElementById('searchInput');

    const loginBtn = document.getElementById('loginBtn');
    const authModal = document.getElementById('authModal');
    const closeAuthModal = document.getElementById('closeAuthModal');
    const authForm = document.getElementById('authForm');
    const authTitle = document.getElementById('authTitle');
    const authSubmitBtn = document.getElementById('authSubmitBtn');
    const toggleAuthMode = document.getElementById('toggleAuthMode');

    const cartBtn = document.getElementById('cartBtn');
    const cartModal = document.getElementById('cartModal');
    const closeCartModal = document.getElementById('closeCartModal');
    const cartList = document.getElementById('cartList');
    const cartCount = document.getElementById('cartCount');
    const cartTotal = document.getElementById('cartTotal');
    const checkoutBtn = document.getElementById('checkoutBtn');

    let darkMode = false;
    let isLoginMode = true;

    // Simple in-memory user storage for demo
    let users = [];
    let loggedInUser = null;

    // Cart storage
    let cart = [];

    // ===== Sample Products =====
    const products = [
      {
        id: 1,
        title: 'Echo Dot (4th Gen) Smart speaker with Alexa',
        price: 49.99,
        image: 'https://images-na.ssl-images-amazon.com/images/I/61IxWv3ecpL._AC_SL1000_.jpg',
        rating: 4.5,
      },
      {
        id: 2,
        title: 'Apple AirPods Pro',
        price: 249.0,
        image: 'https://images-na.ssl-images-amazon.com/images/I/71zny7BTRlL._AC_SL1500_.jpg',
        rating: 4.8,
      },
      {
        id: 3,
        title: 'Samsung Galaxy S25 Ultra 5G',
        price: 1199.99,
        image: 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSgTU_vaqZP2Fcv62Yni3IFjuNVfJLjH-b5T7AB8yvLdpN1YLWajdGcjAcrHh2QhE05QDs&usqp=CAU',
        rating: 4.7,
      },
      {
        id: 4,
        title: 'Kindle Paperwhite – Now Waterproof',
        price: 129.99,
        image: 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQjDiTR7lUxuO7J8z-nZlw2I7oNG8WkHGCapA&s',
        rating: 4.6,
      },
      {
        id: 5,
        title: 'Instant Pot Duo 7-in-1 Electric Pressure Cooker',
        price: 89.99,
        image: 'https://bigbigmart.com/wp-content/uploads/2024/05/Instant-Pot-Duo-7-in-1-Electric-Pressure-Cooker-Slow-Cooker-Rice-Cooker-Steamer-Saute-Yogurt-Maker-Warmer-Sterilizer-Includes-App-With-Over-800-Recipes-Stainless-Steel-8-Quart2.jpg',
        rating: 4.7,
      },
      {
        id: 6,
        title: 'Sony WH-1000XM4 Wireless Noise-Canceling Headphones',
        price: 348.0,
        image: 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTioWihqcsSOOeHzjf6AxMkbFqGdqGJrJCbZQ&s',
        rating: 4.8,
      },
      {
        id: 7,
        title: 'LG 55-Inch 4K Smart OLED TV',
        price: 1399.99,
        image: 'https://m.media-amazon.com/images/I/51okbef8aqL._AC_UF1000,1000_QL80_.jpg',
        rating: 4.5,
      },
      {
        id: 8,
        title: 'Nespresso Vertuo Coffee and Espresso Maker',
        price: 159.0,
        image: 'https://assets.epicurious.com/photos/64c2a404052d2cb5b596e2ac/master/pass/nespresso-vertuo-creatista-HERO_072623_18643_VOG_final.jpg',
        rating: 4.9,
      }
    ];

    // ===== Functions =====

    // Render products based on a filtered list
    function renderProducts(productList) {
      productsGrid.innerHTML = '';

      if (productList.length === 0) {
        productsGrid.innerHTML = '<p>No products found.</p>';
        return;
      }

      productList.forEach(product => {
        const li = document.createElement('li');
        li.className = 'product-card';
        li.setAttribute('tabindex', '0');
        li.innerHTML = `
          <img src="${product.image}" alt="${product.title}" class="product-image" loading="lazy" />
          <div class="product-info">
            <div>
              <h3 class="product-title">${product.title}</h3>
              <div class="product-rating" aria-label="Rating: ${product.rating} out of 5 stars">
                ${renderStars(product.rating)}
              </div>
            </div>
            <p class="product-price" aria-label="Price: $${product.price.toFixed(2)}">$${product.price.toFixed(2)}</p>
            <button class="add-to-cart-btn" data-id="${product.id}" aria-label="Add ${product.title} to cart">Add to Cart</button>
          </div>
        `;
        productsGrid.appendChild(li);
      });

      // Add event listeners for Add to Cart buttons
      document.querySelectorAll('.add-to-cart-btn').forEach(btn => {
        btn.addEventListener('click', (e) => {
          const id = +e.target.dataset.id;
          addToCart(id);
        });
      });
    }

    // Render star ratings (half stars allowed)
    function renderStars(rating) {
      const fullStars = Math.floor(rating);
      const halfStar = rating % 1 >= 0.5;
      let starsHTML = '';

      for (let i = 0; i < fullStars; i++) {
        starsHTML += '⭐';
      }
      if (halfStar) {
        starsHTML += '✰'; // Represent half star
      }
      return starsHTML;
    }

    // Add product to cart
    function addToCart(productId) {
      if (!loggedInUser) {
        alert('Please login to add products to cart.');
        openAuthModal();
        return;
      }

      const product = products.find(p => p.id === productId);
      if (!product) return;

      const cartItem = cart.find(item => item.product.id === productId);
      if (cartItem) {
        cartItem.quantity += 1;
      } else {
        cart.push({ product, quantity: 1 });
      }
      updateCartUI();
    }

    // Update cart UI
    function updateCartUI() {
      cartCount.textContent = cart.reduce((sum, item) => sum + item.quantity, 0);
      cartList.innerHTML = '';

      if (cart.length === 0) {
        cartList.innerHTML = '<li class="empty-cart-msg">Your cart is empty.</li>';
        cartTotal.textContent = '';
        checkoutBtn.disabled = true;
        return;
      }

      let total = 0;
      cart.forEach(({ product, quantity }) => {
        total += product.price * quantity;
        const li = document.createElement('li');
        li.innerHTML = `
          <span>${product.title} (x${quantity})</span>
          <span>$${(product.price * quantity).toFixed(2)}</span>
        `;
        cartList.appendChild(li);
      });
      cartTotal.textContent = `Total: $${total.toFixed(2)}`;
      checkoutBtn.disabled = false;
    }

    // Toggle dark mode
    function toggleDarkMode() {
      darkMode = !darkMode;
      body.classList.toggle('dark-mode', darkMode);
      darkModeToggle.setAttribute('aria-pressed', darkMode.toString());
    }

    // Open auth modal
    function openAuthModal() {
      authModal.style.display = 'flex';
      authModal.setAttribute('aria-hidden', 'false');
      loginBtn.setAttribute('aria-expanded', 'true');
      emailInput.focus();
    }

    // Close auth modal
    function closeAuth() {
      authModal.style.display = 'none';
      authModal.setAttribute('aria-hidden', 'true');
      loginBtn.setAttribute('aria-expanded', 'false');
      authForm.reset();
    }

    // Open cart modal
    function openCartModal() {
      if (!loggedInUser) {
        alert('Please login to view your cart.');
        openAuthModal();
        return;
      }
      cartModal.style.display = 'flex';
      cartModal.setAttribute('aria-hidden', 'false');
      cartBtn.setAttribute('aria-expanded', 'true');
      cartList.focus();
    }

    // Close cart modal
    function closeCart() {
      cartModal.style.display = 'none';
      cartModal.setAttribute('aria-hidden', 'true');
      cartBtn.setAttribute('aria-expanded', 'false');
    }

    // Toggle between login and signup modes
    function toggleAuth() {
      isLoginMode = !isLoginMode;
      if (isLoginMode) {
        authTitle.textContent = 'Login';
        authSubmitBtn.textContent = 'Login';
        toggleAuthMode.textContent = "Don't have an account? Sign Up";
        toggleAuthMode.setAttribute('aria-pressed', 'false');
      } else {
        authTitle.textContent = 'Sign Up';
        authSubmitBtn.textContent = 'Sign Up';
        toggleAuthMode.textContent = 'Already have an account? Login';
        toggleAuthMode.setAttribute('aria-pressed', 'true');
      }
      authForm.reset();
      emailInput.focus();
    }

    // Handle auth form submission
    authForm.addEventListener('submit', (e) => {
      e.preventDefault();

      const email = emailInput.value.trim();
      const password = passwordInput.value;

      if (!email || !password) {
        alert('Please fill out all fields.');
        return;
      }
      if (password.length < 6) {
        alert('Password must be at least 6 characters.');
        return;
      }

      if (isLoginMode) {
        // Login logic
        const user = users.find(u => u.email === email && u.password === password);
        if (!user) {
          alert('Invalid email or password.');
          return;
        }
        loggedInUser = user;
        alert(`Welcome back, ${email}!`);
        closeAuth();
      } else {
        // Signup logic
        if (users.find(u => u.email === email)) {
          alert('User with this email already exists.');
          return;
        }
        users.push({ email, password });
        alert('Account created successfully! Please login.');
        toggleAuth();
      }
    });

    // Event listeners
    darkModeToggle.addEventListener('click', toggleDarkMode);
    loginBtn.addEventListener('click', openAuthModal);
    closeAuthModal.addEventListener('click', closeAuth);
    toggleAuthMode.addEventListener('click', toggleAuth);
    toggleAuthMode.addEventListener('keydown', (e) => {
      if (e.key === 'Enter' || e.key === ' ') {
        e.preventDefault();
        toggleAuth();
      }
    });

    cartBtn.addEventListener('click', openCartModal);
    closeCartModal.addEventListener('click', closeCart);
    checkoutBtn.addEventListener('click', () => {
      alert('Checkout functionality is not implemented in this demo.');
    });

    // Search form submit handler
    document.querySelector('.search-bar').addEventListener('submit', (e) => {
      e.preventDefault();
      const query = searchInput.value.trim().toLowerCase();
      const filtered = products.filter(p => p.title.toLowerCase().includes(query));
      renderProducts(filtered);
    });

    // Initial render
    renderProducts(products);
    updateCartUI();
  </script>
</body>
</html>
